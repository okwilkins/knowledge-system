## 13.1 â€” Introduction to program-defined (user-defined) types

### Defining program-defined types

- Just like type aliases, program-defined types must also be defined and given a name before they can be used.
- The definition for a program type is called a **type definition**.

- A program-defined type must have a name and a definition before it can be used.
	- The other compound types require neither.
- Functions aren't considered user-defined types, even though they require a name and a definition before they can be used.
	- This is because it is the function itself being given a name and a definition, not the function's type.
	- Functions that are defined by the user are called user-defined functions instead.

```cpp
// Define a program-defined type named Fraction
struct Fraction {
	int numerator {};
	int denominator {};
};

int main() {
	Fraction f {3, 4};
	
	return 0;
}
```

- Program-defined type definitions must end in a semicolon.
- Failure to include the semicolon at the end of a type definition is a common programmer error.
	- It can be hard to debug because the compiler may error on the line after the type definition.

### Naming program-defined types

- By convention, program-defined types are named starting with a capital letter and don't use a suffix (e.g. `Fraction`, not `fraction` or `Fraction_t`).

### Using program-defined types throughout a multi-file program

- Every code file that uses a program-defined type needs to see the full type definition before it can be used.
	- A forward declaration is not sufficient.
	- This is required so that the compiler knows how much memory to allocate for objects of that type.
- To propagate type definitions into the code files that need them, program-defined types are typically defined in header files and then included into any code files that requires that type definition.
	- These header files are typically given the same name as the program-defined type.
	- For example: a program-defined type named Fraction would be defined in Fraction.h.

```cpp
// Fraction.h
#ifndef FRACTION_H
#define FRACTION_H

struct Fraction {
	int numerator {};
	int denominator {};
};

#endif
```

```cpp
// Fraction.cpp
#include "Fraction.h"

int main() {
	Fraction f {3, 4};
	
	return 0;
}
```

### Type definitions are partially exempt from the one-definition rule (ODR)

- As the code needs to know the full definition, they must be propagated to each file that needs it.
- To allow for this, types are partially exempt from the one-definition rule.
	- A given type is allowed to be defined in multiple code files.
- There are two caveats that are worth knowing about.
	- First, there can only be one type definition per code file.
		- This usually isn't an issue due to header guards
	- Second, all of the type definitions for a given type must be identical, otherwise undefined behaviour will result.

### Nomenclature: user-defined types vs program-defined types

- The term "user-defined type" sometimes comes up in casual conversation, as well as being mentioned (but not defined) in the C++ language standard.
	- The term tends to mean "a type defined within your own programs".
- The C++ language uses the term "user-defined type" in a non-conventional manner.
	- In the language standard a "user-defined type" is any class type or enumerated type that is defined by you, the standard library or the implementation (e.g. types defined by the compiler to support language extensions).
	- Perhaps counter-intuitively, this means `std::string` is considered to be a user-defined type.
- To provide additional differentiation, the C++20 standard helpfully defines the term "program-defined type" to mean class types and enumerated types that are not defined as part of the standard library, implementation or core language.

|Type|Meaning|Examples|
|---|---|---|
|Fundamental|A basic type built into the core C++ language|int, std::nullptr_t|
|Compound|A type defined in terms of other types|int&, double*, std::string, Fraction|
|User-defined|A class type or enumerated type  <br>(Includes those defined in the standard library or implementation)  <br>(In casual use, typically used to mean program-defined types)|std::string, Fraction|
|Program-defined|A class type or enumerated type  <br>(Excludes those defined in standard library or implementation)|Fraction|
